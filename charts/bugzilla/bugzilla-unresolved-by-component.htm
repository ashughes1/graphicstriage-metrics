<div class='row trunk-section'>
  <table>
    <tr>
      <td style='width:100%;' class='btn-group btn-group-sm text-center split-by-controls'>
        <button type='button' class='btn btn-default active' data-y_accessor='Total'>All</button>
        <button type='button' class='btn btn-default' data-y_accessor='Canvas: 2D'>Canvas: 2D</button>
        <button type='button' class='btn btn-default' data-y_accessor='Canvas: WebGL'>Canvas: WebGL</button>
        <button type='button' class='btn btn-default' data-y_accessor='GFX: Color Management'>GFX: Color Management</button>
        <button type='button' class='btn btn-default' data-y_accessor='Graphics'>Graphics</button>
        <button type='button' class='btn btn-default' data-y_accessor='Graphics: Layers'>Graphics: Layers</button>
        <button type='button' class='btn btn-default' data-y_accessor='Graphics: Text'>Graphics: Text</button>
        <button type='button' class='btn btn-default' data-y_accessor='Image Blocking'>Image Blocking</button>
        <button type='button' class='btn btn-default' data-y_accessor='ImageLib'>ImageLib</button>
        <button type='button' class='btn btn-default' data-y_accessor='Panning and Zooming'>Panning and Zooming</button>
      </td>
    </tr>
    <tr>
      <td class='col-lg-12 text-left' id='chart'></td>
    </tr>
  </table>
</div>

<script>
var globals = {};

var split_by_params = {
  width: 1170,
  height: 400,
  right: 90,
  target: document.getElementById('chart'),
  x_accessor:"date",
  chart_type: "line"
};

$('.split-by-controls button').click(function() {
    var new_y_accessor = $(this).data('y_accessor');
    split_by_params.y_accessor = new_y_accessor;
    split_by_params.title = 'Unresolved Bugs (' + new_y_accessor + ')'

    // change button state
    $(this).addClass('active').siblings().removeClass('active');

    // update data
    delete split_by_params.yay_format;
    MG.data_graphic(split_by_params);
});

d3.json('data/bugzilla/bugzilla-unresolved-by-component.json', function(data) {
  data = MG.convert.date(data, 'date');
  globals.data = data;
  split_by_params.data = data;
  split_by_params.y_accessor = 'Total';
  split_by_params.title = 'Unresolved Bugs (All)'
  MG.data_graphic(split_by_params);
});
</script>
