<div class='row trunk-section'>
    <div style="width:50%; margin-left: 30%">
    <small>
    These graphs show the distribution of graphics crashes by signature (ie. the percentage of signatures showing up at high-volume versus low-volume), tracking how well the
    Graphics team is doing toward the Platform Engineering goal to drive high-volume crashes down to less than 1% of overall crash volume. (<a href="https://trello.com/c/aPBcO3LN">#2445</a>)
    </small>
    </div>
    <h4 class='col-lg-12 text-center'>Breakdown of Top Graphics crashes</h4>
    <div class='col-lg-4 text-left' id='top_10_breakdown'></div>
    <div class='col-lg-4 text-center' id='top_1_breakdown'></div>
    <div class='col-lg-4 text-right' id='top_1_percent_breakdown'></div>
    
    <h4 class='col-lg-12 text-center'>Breakdown of All Graphics crashes</h4>
    <div class='col-lg-4 text-left' id='webgl_breakdown'></div>
    <div class='col-lg-4 text-center' id='driver_breakdown'></div>
    <div class='col-lg-4 text-right' id='other_breakdown'></div>

  <div class='col-lg-6 text-left' id='gfx'></div>
  <div class='col-lg-6 text-left' id='layers'></div>
  <div class='col-lg-6 text-left' id='gfx_top_ten'></div>
  <div class='col-lg-6 text-left' id='layers_top_ten'></div>
  <div class='col-lg-6 text-left' id='gfx_top_ten_percent'></div>
  <div class='col-lg-6 text-left' id='layers_top_ten_percent'></div>
  <div class='col-lg-6 text-left' id='gfx_top_one_percent'></div>
  <div class='col-lg-6 text-left' id='layers_top_one_percent'></div>
</div>

<script>
MG._hooks = {};

d3.json('data/gfx-signature-breakdown.json', function(data) {
    data = MG.convert.date(data, 'date');
    MG.data_graphic({
        data: data,
        title: "Distribution of gfx signatures",
        width: 600,
        height: 300,
        right: 40,
        left:80,
        target: document.getElementById('gfx'),
        x_accessor: "date",
        y_accessor: ["A","B","C","D"],
        y_label: "% of Signatures in Range",
        legend:["< 0.1%","< 1.0%", "< 5.0%", "> 5.0%"],
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
});

d3.json('data/layers-signature-breakdown.json', function(data) {
    data = MG.convert.date(data, 'date');
    MG.data_graphic({
        data: data,
        title: "Distribution of layers signatures",
        width: 600,
        height: 300,
        right: 40,
        left: 80,
        target: document.getElementById('layers'),
        x_accessor: "date",
        y_accessor: ["A","B","C","D"],
        y_label: "% of Signatures in Range",
        legend:["< 0.1%","< 1.0%", "< 5.0%", "> 5.0%"],
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
});

d3.json('data/layers-signature-breakdown.json', function(data) {
    data = MG.convert.date(data, 'date');
    MG.data_graphic({
        data: data,
        title: "Top-10 layers signatures",
        width: 600,
        height: 300,
        right: 40,
        left: 80,
        target: document.getElementById('layers_top_ten'),
        x_accessor: "date",
        y_accessor: "top_ten",
        y_label: "% of Volume",
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
});
d3.json('data/gfx-signature-breakdown.json', function(data) {
    data = MG.convert.date(data, 'date');
    MG.data_graphic({
        data: data,
        title: "Top-10 gfx signatures",
        width: 600,
        height: 300,
        right: 40,
        left: 80,
        target: document.getElementById('gfx_top_ten'),
        x_accessor: "date",
        y_accessor: "top_ten",
        y_label: "% of Volume",
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
});

d3.json('data/layers-signature-breakdown.json', function(data) {
    data = MG.convert.date(data, 'date');
    MG.data_graphic({
        data: data,
        title: "Top 10% of layers signatures",
        width: 600,
        height: 300,
        right: 40,
        left: 80,
        target: document.getElementById('layers_top_ten_percent'),
        x_accessor: "date",
        y_accessor: "top_ten_percent",
        y_label: "% of Volume",
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
});
d3.json('data/gfx-signature-breakdown.json', function(data) {
    data = MG.convert.date(data, 'date');
    MG.data_graphic({
        data: data,
        title: "Top 10% of gfx signatures",
        width: 600,
        height: 300,
        right: 40,
        left: 80,
        target: document.getElementById('gfx_top_ten_percent'),
        x_accessor: "date",
        y_accessor: "top_ten_percent",
        y_label: "% of Volume",
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
});

d3.json('data/layers-signature-breakdown.json', function(data) {
    data = MG.convert.date(data, 'date');
    MG.data_graphic({
        data: data,
        title: "Top 1% of layers signatures",
        width: 600,
        height: 300,
        right: 40,
        left: 80,
        target: document.getElementById('layers_top_one_percent'),
        x_accessor: "date",
        y_accessor: "top_one_percent",
        y_label: "% of Volume",
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
});
d3.json('data/gfx-signature-breakdown.json', function(data) {
    data = MG.convert.date(data, 'date');
    MG.data_graphic({
        data: data,
        title: "Top 1% of gfx signatures",
        width: 600,
        height: 300,
        right: 40,
        left: 80,
        target: document.getElementById('gfx_top_one_percent'),
        x_accessor: "date",
        y_accessor: "top_one_percent",
        y_label: "% of Volume",
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
});

d3.json('data/top10-breakdown.json', function(data) {
    data = MG.convert.date(data, 'date');
    MG.data_graphic({
        data: data,
        title: "Top 10 Signatures",
        width: 400,
        height: 300,
        right: 40,
        left: 80,
        target: document.getElementById('top_10_breakdown'),
        x_accessor: "date",
        y_accessor: ["driver","other","webgl"],
        legend: ["driver","other","webgl"],
        y_label: "% of Volume",
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
});
d3.json('data/top1-breakdown.json', function(data) {
    data = MG.convert.date(data, 'date');
    MG.data_graphic({
        data: data,
        title: "Top Signature",
        width: 400,
        height: 300,
        right: 40,
        left: 80,
        target: document.getElementById('top_1_breakdown'),
        x_accessor: "date",
        y_accessor: ["driver","other","webgl"],
        legend: ["driver","other","webgl"],
        y_label: "% of Volume",
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
});
d3.json('data/top1-percent-breakdown.json', function(data) {
    data = MG.convert.date(data, 'date');
    MG.data_graphic({
        data: data,
        title: "Top 1% of Signatures",
        width: 400,
        height: 300,
        right: 40,
        left: 80,
        target: document.getElementById('top_1_percent_breakdown'),
        x_accessor: "date",
        y_accessor: ["driver","other","webgl"],
        legend: ["driver","other","webgl"],
        y_label: "% of Volume",
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
});

d3.json('data/top-bucket-breakdown.json', function(data) {
    data['webgl'] = MG.convert.date(data['webgl'], 'date');
    data['driver'] = MG.convert.date(data['driver'], 'date')
    data['other'] = MG.convert.date(data['other'], 'date')

    MG.data_graphic({
        data: data["webgl"],
        title: "WebGL",
        width: 400,
        height: 300,
        right: 40,
        left: 80,
        target: document.getElementById('webgl_breakdown'),
        x_accessor: "date",
        y_accessor: ["A","B","C","D"],
        legend: ["< 0.1%","< 1.0%","< 5.0%","> 5.0%"],
        y_label: "% of Volume",
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
    MG.data_graphic({
        data: data["driver"],
        title: "Drivers",
        width: 400,
        height: 300,
        right: 40,
        left: 80,
        target: document.getElementById('driver_breakdown'),
        x_accessor: "date",
        y_accessor: ["A","B","C","D"],
        legend: ["< 0.1%","< 1.0%","< 5.0%","> 5.0%"],
        y_label: "% of Volume",
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
    MG.data_graphic({
        data: data["other"],
        title: "Graphics (excl. WebGL & Driver)",
        width: 400,
        height: 300,
        right: 40,
        left: 80,
        target: document.getElementById('other_breakdown'),
        x_accessor: "date",
        y_accessor: ["A","B","C","D"],
        legend: ["< 0.1%","< 1.0%","< 5.0%","> 5.0%"],
        y_label: "% of Volume",
        interpolate: "monotone",
        chart_type: "line",
        linked:true,
        animate_on_load:true,
        markers: [{
          'date': new Date('2016-03-08T00:00:00.000Z'),
          'label': '45/46/47/48'
        },{
          'date': new Date('2016-01-26T00:00:00.000Z'),
          'label': '44/45/46/47'
        },{
          'date': new Date('2015-12-15T00:00:00.000Z'),
          'label': '43/44/45/46'
        }]
    });
});
</script>
